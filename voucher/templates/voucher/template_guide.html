{% extends "base.html" %}

{% block title %}템플릿 변수 가이드 - CYNOW{% endblock %}

{% block extra_css %}
<style>
    .markdown-content {
        line-height: 1.8;
    }
    .markdown-content h1 { font-size: 1.8rem; margin-top: 2rem; }
    .markdown-content h2 { font-size: 1.5rem; margin-top: 1.5rem; border-bottom: 1px solid var(--ios-separator); padding-bottom: 0.5rem; }
    .markdown-content h3 { font-size: 1.2rem; margin-top: 1rem; }
    .markdown-content code { 
        background: var(--ios-gray-6); 
        padding: 2px 6px; 
        border-radius: 4px;
        font-size: 0.9em;
    }
    .markdown-content pre {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 1rem;
        border-radius: 8px;
        overflow-x: auto;
    }
    .markdown-content pre code {
        background: none;
        padding: 0;
    }
    .markdown-content table {
        width: 100%;
        border-collapse: collapse;
        margin: 1rem 0;
    }
    .markdown-content th, .markdown-content td {
        border: 1px solid var(--ios-separator);
        padding: 8px 12px;
        text-align: left;
    }
    .markdown-content th {
        background: var(--ios-gray-6);
    }
</style>
{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'voucher:template_list' %}">템플릿 관리</a></li>
        <li class="breadcrumb-item active">변수 가이드</li>
    </ol>
</nav>

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="page-title">템플릿 변수 가이드</h1>
        <p class="page-subtitle">DOCX 템플릿에서 사용할 수 있는 변수 목록</p>
    </div>
    <a href="{% url 'voucher:template_list' %}" class="btn btn-outline-light">
        <i class="bi bi-arrow-left"></i> 템플릿 목록
    </a>
</div>

<div class="card">
    <div class="card-body markdown-content">
        {% if content %}
        <pre style="white-space: pre-wrap; background: transparent; color: inherit; font-family: inherit;">{{ content }}</pre>
        {% else %}
        <div class="text-center py-5 text-muted">
            <i class="bi bi-file-earmark-x" style="font-size: 3rem;"></i>
            <p class="mt-3">가이드 파일을 찾을 수 없습니다.</p>
            <p><code>docx_templates/TEMPLATE_VARIABLES.md</code></p>
        </div>
        {% endif %}
    </div>
</div>

<div class="card mt-4">
    <div class="card-header">
        <i class="bi bi-lightbulb me-2"></i>빠른 참조
    </div>
    <div class="card-body">
        <h5>공급처 변수</h5>
        <code>{{ "{{supplier_company}}" }}</code>
        <code>{{ "{{supplier_address}}" }}</code>
        <code>{{ "{{supplier_ceo}}" }}</code>
        <code>{{ "{{supplier_tel}}" }}</code>
        <code>{{ "{{supplier_fax}}" }}</code>
        <code>{{ "{{supplier_manager}}" }}</code>
        <code>{{ "{{supplier_manager_phone}}" }}</code>
        <code>{{ "{{supplier_manager_email}}" }}</code>
        
        <h5 class="mt-4">수신처 변수</h5>
        <code>{{ "{{receiver_company}}" }}</code>
        <code>{{ "{{receiver_address}}" }}</code>
        <code>{{ "{{receiver_ceo}}" }}</code>
        <code>{{ "{{receiver_tel1}}" }}</code>
        <code>{{ "{{receiver_manager}}" }}</code>
        <code>{{ "{{receiver_manager_phone}}" }}</code>
        <code>{{ "{{receiver_manager_email}}" }}</code>
        
        <h5 class="mt-4">견적 정보</h5>
        <code>{{ "{{quote_date}}" }}</code>
        <code>{{ "{{quote_no}}" }}</code>
        <code>{{ "{{quote_title}}" }}</code>
        
        <h5 class="mt-4">품목 테이블 (반복)</h5>
        <pre class="mt-2" style="background: #1e1e1e; color: #d4d4d4; padding: 1rem; border-radius: 8px;">{% verbatim %}{%tr for item in items %}
  {{item.no}} | {{item.gas_name}} | {{item.product_name}} | {{item.material_code}} | 
  {{item.end_user}} | {{item.packing}} | {{item.filling_weight}} | 
  {{item.currency}} | {{item.price_per_kg}} | {{item.packing_price}}
{%tr endfor %}{% endverbatim %}</pre>
        
        <h5 class="mt-4">하단 정보</h5>
        <code>{{ "{{apply_period}}" }}</code>
        <code>{{ "{{payment_terms}}" }}</code>
        <code>{{ "{{doc_date}}" }}</code>
    </div>
</div>
{% endblock %}

