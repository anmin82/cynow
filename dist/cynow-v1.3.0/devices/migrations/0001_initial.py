# Generated by Django 5.2.9 on 2025-12-18 14:52

from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='ScaleWeightLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scale_id', models.CharField(default='default', help_text='저울 식별자 (다중 저울 지원 대비)', max_length=50, verbose_name='저울 ID')),
                ('cylinder_no', models.CharField(db_index=True, help_text='계측 대상 용기번호', max_length=50, verbose_name='용기번호')),
                ('event_type', models.CharField(choices=[('SHIP', '출하'), ('RETURN', '회수')], help_text='SHIP: 출하, RETURN: 회수', max_length=10, verbose_name='이벤트 유형')),
                ('gross_kg', models.DecimalField(decimal_places=2, help_text='보호캡 분리 후 계측값 (표준 GROSS)', max_digits=10, verbose_name='총무게 (kg)')),
                ('raw_line', models.TextField(help_text='저울에서 수신한 원본 데이터 (예: "ST , +000053.26 _kg")', verbose_name='원본 라인')),
                ('received_at', models.DateTimeField(help_text='리스너가 최신값을 받은 시각', verbose_name='수신 시각')),
                ('committed_at', models.DateTimeField(auto_now_add=True, help_text='출하/회수 확정(Commit) 시각', verbose_name='확정 시각')),
                ('arrival_shipping_no', models.CharField(blank=True, db_index=True, help_text='TR_ORDERS 연결 대비 (arrival_shipping_no)', max_length=50, null=True, verbose_name='입출고번호')),
                ('move_report_no', models.CharField(blank=True, db_index=True, help_text='TR_MOVE_REPORTS 연결 대비 (move_report_no)', max_length=50, null=True, verbose_name='이동보고서번호')),
            ],
            options={
                'verbose_name': '저울 무게 로그',
                'verbose_name_plural': '저울 무게 로그',
                'db_table': 'scale_weight_log',
                'ordering': ['-committed_at'],
                'indexes': [models.Index(fields=['cylinder_no', '-committed_at'], name='scale_weigh_cylinde_3ee03f_idx'), models.Index(fields=['event_type', '-committed_at'], name='scale_weigh_event_t_f501d7_idx')],
            },
        ),
    ]
